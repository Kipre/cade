const std = @import("std");
const parse = @import("parse_path.zig");
// const PathSegment = parse.PathSegment;

const bottle = @cImport({
    @cInclude("MakeBottle.h");
});

const solidify = @cImport({
    @cInclude("Solidify.h");
});
const PathSegment = solidify.PathSegment;

pub fn main() !void {
    var gpa = std.heap.GeneralPurposeAllocator(.{}){};
    defer _ = gpa.deinit();
    const allocator = gpa.allocator();

    var path = try parse.parsePath(allocator, "M 0 35 L 174.47799427400602 35 A 3 3 0 0 1 180.47799427400602 35 L 180.47799427400602 50 L 210.47799427400602 50.00000000000001 L 210.47799427400602 35 A 3 3 0 0 1 216.47799427400602 35 L 465.43398282201804 35 A 3 3 0 0 1 471.43398282201804 35 L 471.43398282201804 50 L 501.43398282201804 50.00000000000001 L 501.43398282201804 35 A 3 3 0 0 1 507.43398282201804 35 L 756.38997137003 35 A 3 3 0 0 1 762.38997137003 35 L 762.38997137003 50 L 792.38997137003 50.00000000000001 L 792.38997137003 35 A 3 3 0 0 1 798.38997137003 35 L 972.8679656440361 35 L 972.8679656440358 -35 L 798.3899713700303 -35 A 3 3 0 0 1 792.38997137003 -35 L 792.3899713700303 -50.00000000000001 L 762.38997137003 -50 L 762.38997137003 -35 A 3 3 0 0 1 756.38997137003 -35 L 507.43398282201804 -35 A 3 3 0 0 1 501.43398282201804 -35 L 501.43398282201815 -50.00000000000001 L 471.43398282201804 -50 L 471.43398282201804 -35 A 3 3 0 0 1 465.43398282201815 -35 L 216.47799427400602 -35 A 3 3 0 0 1 210.47799427400602 -35 L 210.47799427400602 -50.00000000000001 L 180.47799427400602 -50 L 180.47799427400597 -35 A 3 3 0 0 1 174.47799427400608 -35 L -1.7145055188062946e-14 -35 Z");

    const size = path.items.len;

    const array = try path.toOwnedSlice();
    
    std.debug.print("{d}", .{size});
    _ = solidify.pathToSolid(array.ptr, size);
}
